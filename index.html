<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>タイトル python -m http.server --cgi ;  http://localhost:8000/</title>
</head>
<body>
    <button type="button" onclick="func_search()">検索実行</button>

    <label for="area">下記に検索ワードを入れてください</label>
    <br>
    <input type="text" id="text2" size="80" value="" /><br>
    <button type="button"  onclick="func_all()" >DBのすべてを表示 </button>
    <button type="button"  onclick="func_head()" >DBのすべてを表示（詳細なし） </button>
    <button type="button"  onclick="func_last()" >DBの最後を表示 </button><br>
    <button type="button"  onclick="func_del()" >DBの1レコード削除 </button>
    <button type="button"  onclick="func_one()" >DBの1レコード表示 </button>

    レコード番号<input type="text" id="text3" size="10" value="" /><br>


    <p id="inbox"></p>

    <script src="https://code.jquery.com/jquery-2.2.4.js" ></script>

<script>
    function func_all() {
        let str2 = document.getElementById("text2").value;
        if(str2==""){
            str2 = "";
        }

        $.ajax({

            url:'./cgi-bin/db_view_all.py',
            type:'POST',
            data:{sent2:str2}
        })
        .done(function(data){
            var smp=document.getElementById("inbox");
            smp.innerHTML = data;

        })
        .fail(function(){
            var smp=document.getElementById("inbox");
            smp.innerHTML = "failed";
        });
    }

    function func_head() {
        let str2 = document.getElementById("text2").value;
        if(str2==""){
            str2 = "";
        }

        $.ajax({

            url:'./cgi-bin/db_view_head.py',
            type:'POST',
            data:{sent2:str2}
        })
        .done(function(data){
            var smp=document.getElementById("inbox");
            smp.innerHTML = data;

        })
        .fail(function(){
            var smp=document.getElementById("inbox");
            smp.innerHTML = "failed";
        });
    }



    function func_last() {
        let str2 = document.getElementById("text2").value;
        if(str2==""){
            str2 = "";
        }

        $.ajax({

            url:'./cgi-bin/db_view_last.py',
            type:'POST',
            data:{sent2:str2}
        })
        .done(function(data){
            var smp=document.getElementById("inbox");
            smp.innerHTML = data;

        })
        .fail(function(){
            var smp=document.getElementById("inbox");
            smp.innerHTML = "failed";
        });
    }



    function func_one() {
        let str2 = document.getElementById("text3").value;
        if(str2==""){
            str2 = "";
        }

        $.ajax({

            url:'./cgi-bin/db_view_one.py',
            type:'POST',
            data:{sent2:str2}
        })
        .done(function(data){
            var smp=document.getElementById("inbox");
            smp.innerHTML = data;

        })
        .fail(function(){
            var smp=document.getElementById("inbox");
            smp.innerHTML = "failed";
        });
    }



    function  func_search(){
        let str2 = document.getElementById("text2").value;
        if(str2==""){
            str2 = "";
        }


        $.ajax({

            url:'./cgi-bin/inet_search.py',
            type:'POST',
            data:{sent2:str2}
        })
        .done(function(data){
            var smp=document.getElementById("inbox");
            smp.innerHTML = data;

        })
        .fail(function(){
            var smp=document.getElementById("inbox");
            smp.innerHTML = "failed";
        });


    }

    function  func_del(){
        let str2 = document.getElementById("text3").value;
        if(str2==""){
            str2 = "";
        }


        $.ajax({

            url:'./cgi-bin/db_del.py',
            type:'POST',
            data:{sent2:str2}
        })
        .done(function(data){
            var smp=document.getElementById("inbox");
            smp.innerHTML = data;

        })
        .fail(function(){
            var smp=document.getElementById("inbox");
            smp.innerHTML = "failed";
        });


    }



    $('select').change(function() {
        func_a();
    });

    $(function(){
        
    $("button").click(function(){
        func_a();
    });
});


</script>

</body>
</html>

